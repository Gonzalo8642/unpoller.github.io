(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{106:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return v}));var i=t(0),a=t.n(i);function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){p(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},p=Object.keys(e);for(i=0;i<p.length;i++)t=p[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(i=0;i<p.length;i++)t=p[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=a.a.createContext({}),s=function(e){var n=a.a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=s(e.components);return a.a.createElement(o.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},d=a.a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,p=e.originalType,u=e.parentName,o=r(e,["components","mdxType","originalType","parentName"]),c=s(t),d=i,v=c["".concat(u,".").concat(d)]||c[d]||b[d]||p;return t?a.a.createElement(v,l(l({ref:n},o),{},{components:t})):a.a.createElement(v,l({ref:n},o))}));function v(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var p=t.length,u=new Array(p);u[0]=d;var l={};for(var r in n)hasOwnProperty.call(n,r)&&(l[r]=n[r]);l.originalType=e,l.mdxType="string"==typeof e?e:i,u[1]=l;for(var o=2;o<p;o++)u[o]=t[o];return a.a.createElement.apply(null,u)}return a.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},66:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return p})),t.d(n,"metadata",(function(){return u})),t.d(n,"toc",(function(){return l})),t.d(n,"default",(function(){return o}));var i=t(3),a=(t(0),t(106));const p={id:"api",title:"API"},u={unversionedId:"advanced/api",id:"advanced/api",isDocsHomePage:!1,title:"API",description:"These are the available API paths that the built-in web server provides.",source:"@site/docs/advanced/api.md",slug:"/advanced/api",permalink:"/docs/advanced/api",version:"current",sidebar:"someSidebar",previous:{title:"Webserver",permalink:"/docs/advanced/webserver"},next:{title:"Common Solutions",permalink:"/docs/help/common"}},l=[{value:"<code>/debug/vars</code>",id:"debugvars",children:[]},{value:"<code>/health</code>",id:"health",children:[]},{value:"<code>/api/v1/config</code>",id:"apiv1config",children:[]},{value:"<code>/api/v1/config/plugins</code>",id:"apiv1configplugins",children:[]},{value:"<code>/api/v1/output/&lt;output&gt;</code>",id:"apiv1outputoutput",children:[]},{value:"<code>/api/v1/output/&lt;output&gt;/eventgroups</code>",id:"apiv1outputoutputeventgroups",children:[]},{value:"<code>/api/v1/output/&lt;output&gt;/events/&lt;group&gt;</code>",id:"apiv1outputoutputeventsgroup",children:[]},{value:"<code>/api/v1/output/&lt;output&gt;/events</code>",id:"apiv1outputoutputevents",children:[]},{value:"<code>/api/v1/input/&lt;input&gt;</code>",id:"apiv1inputinput",children:[]},{value:"<code>/api/v1/input/&lt;input&gt;/eventgroups</code>",id:"apiv1inputinputeventgroups",children:[]},{value:"<code>/api/v1/input/&lt;input&gt;/eventgroups/&lt;siteID&gt;</code>",id:"apiv1inputinputeventgroupssiteid",children:[]},{value:"<code>/api/v1/input/&lt;input&gt;/events/&lt;group&gt;</code>",id:"apiv1inputinputeventsgroup",children:[]},{value:"<code>/api/v1/input/&lt;input&gt;/events</code>",id:"apiv1inputinputevents",children:[]},{value:"<code>/api/v1/input/&lt;input&gt;/sites</code>",id:"apiv1inputinputsites",children:[]},{value:"<code>/api/v1/input/&lt;input&gt;/clients</code>",id:"apiv1inputinputclients",children:[]},{value:"<code>/api/v1/input/&lt;input&gt;/clients/&lt;siteID&gt;</code>",id:"apiv1inputinputclientssiteid",children:[]},{value:"<code>/api/v1/input/&lt;input&gt;/devices</code>",id:"apiv1inputinputdevices",children:[]},{value:"<code>/api/v1/input/&lt;input&gt;/devices/&lt;siteID&gt;</code>",id:"apiv1inputinputdevicessiteid",children:[]}],r={toc:l};function o({components:e,...n}){return Object(a.b)("wrapper",Object(i.a)({},r,n,{components:e,mdxType:"MDXLayout"}),Object(a.b)("p",null,"These are the available API paths that the ",Object(a.b)("a",{parentName:"p",href:"webserver"},"built-in web server")," provides."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"The web server was added in UniFi Poller v2.0.2.")),Object(a.b)("h2",{id:"debugvars"},Object(a.b)("inlineCode",{parentName:"h2"},"/debug/vars")),Object(a.b)("p",null,"This path prints ",Object(a.b)("a",{parentName:"p",href:"https://golang.org/pkg/expvar/"},"expvar")," data,\nwhich currently contains only memory statistics."),Object(a.b)("h2",{id:"health"},Object(a.b)("inlineCode",{parentName:"h2"},"/health")),Object(a.b)("p",null,"Prints ",Object(a.b)("inlineCode",{parentName:"p"},"OK"),"."),Object(a.b)("h2",{id:"apiv1config"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/config")),Object(a.b)("p",null,"Prints ",Object(a.b)("inlineCode",{parentName:"p"},"poller")," config, uptime and plugins."),Object(a.b)("p",null,"The empty ",Object(a.b)("inlineCode",{parentName:"p"},"plugins")," list under ",Object(a.b)("inlineCode",{parentName:"p"},"poller")," represents configured and loaded ",Object(a.b)("inlineCode",{parentName:"p"},"*.so"),"\nshared-object plugins. These are rare and that list will almost always be empty."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl unifi.poller:37288/api/v1/config | jq .\n{\n  "arch": "linux amd64",\n  "branch": "dn2_events",\n  "built": "2020-08-17T04:20:00Z",\n  "cpus": 16,\n  "gid": 0,\n  "gover": "go1.14.4",\n  "inputs": {\n    "unifi": {\n      "name": "unifi",\n      "version": "v0.0.9",\n      "path": "github.com/unifi-poller/inputunifi"\n    }\n  },\n  "malloc": 9353240,\n  "memsys": 75055360,\n  "mtalloc": 33876272,\n  "numgc": 1234,\n  "outputs": {\n    "influxdb": {\n      "name": "influxdb",\n      "version": "v0.0.11",\n      "path": "github.com/unifi-poller/influxunifi"\n    },\n    "loki": {\n      "name": "loki",\n      "version": "v0.0.1",\n      "path": "github.com/unifi-poller/lokiunifi"\n    },\n    "prometheus": {\n      "name": "prometheus",\n      "version": "v0.0.10",\n      "path": "github.com/unifi-poller/promunifi"\n    }\n  },\n  "pid": 1,\n  "poller": {\n    "plugins": [],\n    "debug": true,\n    "quiet": false\n  },\n  "uid": 0,\n  "uptime": 1234,\n  "version": "2.0.2-999"\n}\n')),Object(a.b)("h2",{id:"apiv1configplugins"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/config/plugins")),Object(a.b)("p",null,"Prints list of plugins only. Output and Input. These are also in ",Object(a.b)("inlineCode",{parentName:"p"},"/config")," (above)."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl unifi.poller:37288/api/v1/config/plugins | jq .\n{\n  "inputs": {\n    "unifi": {\n      "name": "unifi",\n      "version": "v0.0.9",\n      "path": "github.com/unifi-poller/inputunifi"\n    }\n  },\n  "outputs": {\n    "influxdb": {\n      "name": "influxdb",\n      "version": "v0.0.11",\n      "path": "github.com/unifi-poller/influxunifi"\n    },\n    "loki": {\n      "name": "loki",\n      "version": "v0.0.1",\n      "path": "github.com/unifi-poller/lokiunifi"\n    },\n    "prometheus": {\n      "name": "prometheus",\n      "version": "v0.0.10",\n      "path": "github.com/unifi-poller/promunifi"\n    }\n  }\n}\n')),Object(a.b)("h2",{id:"apiv1outputoutput"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/output/<output>")),Object(a.b)("p",null,"Prints configuration for ",Object(a.b)("inlineCode",{parentName:"p"},"<output>")," output plugin."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl -s unifi.poller:37288/api/v1/output/Loki | jq .\n{\n  "disable": false,\n  "verify_ssl": false,\n  "url": "http://loki:3100",\n  "user": "",\n  "pass": "false",\n  "tenant_id": "",\n  "interval": {\n    "Duration": 120000000000\n  },\n  "timeout": {\n    "Duration": 10000000000\n  }\n}\n')),Object(a.b)("h2",{id:"apiv1outputoutputeventgroups"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/output/<output>/eventgroups")),Object(a.b)("p",null,"Prints all event-groups present for the requested output plugin.\nOutput plugins currently only have one event group but there\nis nothing limiting them from adding more."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl -s unifi.poller:37288/api/v1/output/Loki/eventgroups\n["Loki"]\n\n$ curl -s unifi.poller:37288/api/v1/output/Prometheus/eventgroups\n["Prometheus"]\n\n$ curl -s unifi.poller:37288/api/v1/output/WebServer/eventgroups\n["WebServer"]\n\n$ curl -s unifi.poller:37288/api/v1/output/InfluxDB/eventgroups\n["InfluxDB"]\n')),Object(a.b)("h2",{id:"apiv1outputoutputeventsgroup"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/output/<output>/events/<group>")),Object(a.b)("p",null,"Prints events specific to the requested output and group.\nLooks like output plugin events with one less dictionary."),Object(a.b)("h2",{id:"apiv1outputoutputevents"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/output/<output>/events")),Object(a.b)("p",null,"Prints all events for the specified plugin."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl -s unifi.poller:37288/api/v1/output/Loki/events | jq .\n{\n  "Loki": {\n    "latest": "2020-07-03T04:05:58.656262803-07:00",\n    "events": [\n      {\n        "ts": "2020-07-03T03:09:58.376113474-07:00",\n        "msg": "Loki Event collection started, interval: 2m0s, URL: http://loki:3100",\n        "tags": {\n          "type": "info"\n        }\n      },\n      {\n        "ts": "2020-07-03T04:05:58.656262803-07:00",\n        "msg": "Events sent to Loki. Event: 0, IDS: 0, Alarm: 0, Anomaly: 0, Dur: 280ms",\n        "tags": {\n          "type": "info"\n      }\n    }\n  ]\n')),Object(a.b)("h2",{id:"apiv1inputinput"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/input/<input>")),Object(a.b)("p",null,"Prints configuration for ",Object(a.b)("inlineCode",{parentName:"p"},"<input>")," input plugin."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl -s unifi.poller:37288/api/v1/input/unifi | jq .\n{\n  "defaults": {\n    "verify_ssl": false,\n    "save_anomalies": false,\n    "save_alarms": false,\n    "save_events": false,\n    "save_ids": false,\n    "save_dpi": false,\n    "hash_pii": false,\n    "save_sites": true,\n    "user": "unifipoller",\n    "pass": "true",\n    "url": "https://127.0.0.1:8443",\n    "sites": [\n      "all"\n    ]\n  },\n  "disable": false,\n  "dynamic": false,\n  "controllers": [\n    {\n      "verify_ssl": false,\n      "save_anomalies": true,\n      "save_alarms": true,\n      "save_events": true,\n      "save_ids": true,\n      "save_dpi": true,\n      "hash_pii": false,\n      "save_sites": true,\n      "user": "unifipoller",\n      "pass": "true",\n      "url": "https://unifi-controller:8443",\n      "sites": [\n        "all"\n      ],\n      "id": "572e0211-a02a-4d09-b6a5-bad63fb76f1c"\n    }\n  ]\n}\n')),Object(a.b)("h2",{id:"apiv1inputinputeventgroups"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/input/<input>/eventgroups")),Object(a.b)("p",null,"Prints all event-groups present for the requested input plugin.\nCurrently the ",Object(a.b)("inlineCode",{parentName:"p"},"unifi")," input plugin has one group for the plugin\nitself, and four groups for each configured site. The\nfour groups are ",Object(a.b)("inlineCode",{parentName:"p"},"alarms"),", ",Object(a.b)("inlineCode",{parentName:"p"},"events"),", ",Object(a.b)("inlineCode",{parentName:"p"},"ids"),", ",Object(a.b)("inlineCode",{parentName:"p"},"anomalies"),", and each\nis prefixed with the site ID."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl -s unifi.poller:37288/api/v1/input/unifi/eventgroups | jq .\n[\n"unifi",\n"574e86664333ffb999a2683f_alarms",\n"574e86664333ffb999a2683f_events",\n"574e86664333ffb999a2683f_ids",\n"574e86664333ffb999a2683f_anomalies"\n]\n')),Object(a.b)("h2",{id:"apiv1inputinputeventgroupssiteid"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/input/<input>/eventgroups/<siteID>")),Object(a.b)("p",null,"Prints all event-groups present for the requested input plugin and siteID."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl -s unifi.poller:37288/api/v1/input/unifi/eventgroups/574e86664333ffb999a2683f | jq .\n[\n"574e86664333ffb999a2683f_alarms",\n"574e86664333ffb999a2683f_events",\n"574e86664333ffb999a2683f_ids",\n"574e86664333ffb999a2683f_anomalies"\n]\n')),Object(a.b)("h2",{id:"apiv1inputinputeventsgroup"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/input/<input>/events/<group>")),Object(a.b)("p",null,"Prints events specific to the requested input and group."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-json"},'curl -s unifi.poller:37288/api/v1/input/unifi/events/unifi | jq .\n{\n  "latest": "2020-07-04T00:30:04.461330789-07:00",\n  "events": [\n    {\n      "ts": "2020-07-04T00:28:31.824048428-07:00",\n      "msg": "Requested https://unifi-controller:8443/api/s/default/stat/anomalies?scale=hourly&end=1593847711000: elapsed 7ms, returned 421 bytes",\n      "tags": {\n        "type": "debug"\n      }\n    },\n    {\n      "ts": "2020-07-04T00:32:04.45699961-07:00",\n      "msg": "Unmarshalling Device Type: usw, site Home (default) ",\n      "tags": {\n        "type": "debug"\n      }\n    },\n    {\n      "ts": "2020-07-04T00:32:04.461339777-07:00",\n      "msg": "Unmarshalling Device Type: uap, site Home (default) ",\n      "tags": {\n        "type": "debug"\n      }\n    }\n  ]\n}\n')),Object(a.b)("h2",{id:"apiv1inputinputevents"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/input/<input>/events")),Object(a.b)("p",null,"Prints all events for the specified plugin.\nLooks like output plugin events."),Object(a.b)("h2",{id:"apiv1inputinputsites"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/input/<input>/sites")),Object(a.b)("p",null,"Prints the most recently collected sites and some meta data."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl -s unifi.poller:37288/api/v1/input/unifi/sites | jq .\n[\n  {\n    "id": "574e86664333ffb999a2683f",\n    "name": "default",\n    "desc": "Home",\n    "source": "https://unifi-controller:8443",\n    "controller": "572e0211-a02a-4d09-b6a5-bad63fb76f1c"\n  }\n]\n')),Object(a.b)("h2",{id:"apiv1inputinputclients"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/input/<input>/clients")),Object(a.b)("p",null,"Prints the most recently collected clients and some meta data."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl -s unifi.poller:37288/api/v1/input/unifi/clients | jq .\n[\n  {\n    "rx_bytes": 2273696,\n    "tx_bytes": 4029181,\n    "name": "RMPROPLUS-43-3c-88",\n    "site_id": "574e86664333ffb999a2683f",\n    "source": "https://unifi-controller:8443",\n    "controller": "572e0211-a02a-4d09-b6a5-bad63fb76f1c",\n    "mac": "34:ea:34:43:3c:88",\n    "ip": "192.168.1.17",\n    "type": "wireless",\n    "device_mac": "b4:fb:e4:d2:74:39",\n    "since": "2020-03-29T04:37:32-07:00",\n    "last": "2020-07-03T04:10:36-07:00"\n  },\n  {\n    "rx_bytes": 1530352814,\n    "tx_bytes": 205398316,\n    "name": "ubuntu",\n    "site_id": "574e86664333ffb999a2683f",\n    "source": "https://unifi-controller:8443",\n    "controller": "572e0211-a02a-4d09-b6a5-bad63fb76f1c",\n    "mac": "52:54:00:9a:ea:9e",\n    "ip": "",\n    "type": "wired",\n    "device_mac": "80:2a:a8:5d:86:32",\n    "since": "2020-05-03T04:37:21-07:00",\n    "last": "2020-07-03T04:10:46-07:00"\n  }\n]\n')),Object(a.b)("h2",{id:"apiv1inputinputclientssiteid"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/input/<input>/clients/<siteID>")),Object(a.b)("p",null,"Prints the most recently collected clients from a specific site."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},"$ curl -s unifi.poller:37288/api/v1/input/unifi/clients/574e86664333ffb999a2683f | jq .\n# Looks the same as above.\n")),Object(a.b)("h2",{id:"apiv1inputinputdevices"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/input/<input>/devices")),Object(a.b)("p",null,"Prints the most recently collected devices and some meta data."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},'$ curl -s unifi.poller:37288/api/v1/input/unifi/devices | jq .\n[\n  {\n    "clients": 3,\n    "uptime": 4835552,\n    "name": "wap-lower",\n    "site_id": "574e86664333ffb999a2683f",\n    "source": "https://unifi-controller:8443",\n    "controller": "572e0211-a02a-4d09-b6a5-bad63fb76f1c",\n    "mac": "80:2a:a8:11:ea:78",\n    "ip": "192.168.1.14",\n    "type": "uap",\n    "model": "U7PG2",\n    "version": "4.3.13.11253"\n  },\n  {\n    "clients": 14,\n    "uptime": 4834600,\n    "name": "wap-upper",\n    "site_id": "574e86664333ffb999a2683f",\n    "source": "https://unifi-controller:8443",\n    "controller": "572e0211-a02a-4d09-b6a5-bad63fb76f1c",\n    "mac": "b4:fb:e4:d2:46:93",\n    "ip": "192.168.1.215",\n    "type": "uap",\n    "model": "U7NHD",\n    "version": "4.3.13.11253"\n  },\n  {\n    "clients": 2,\n    "uptime": 4834344,\n    "name": "wap-wall",\n    "site_id": "574e86664333ffb999a2683f",\n    "source": "https://unifi-controller:8443",\n    "controller": "572e0211-a02a-4d09-b6a5-bad63fb76f1c",\n    "mac": "74:83:c2:d4:22:d3",\n    "ip": "192.168.1.190",\n    "type": "uap",\n    "model": "UHDIW",\n    "version": "4.3.13.11253"\n  },\n  {\n    "clients": 19,\n    "uptime": 4834869,\n    "name": "switch",\n    "site_id": "574e86664333ffb999a2683f",\n    "source": "https://unifi-controller:8443",\n    "controller": "572e0211-a02a-4d09-b6a5-bad63fb76f1c",\n    "mac": "80:2a:a8:5d:68:23",\n    "ip": "192.168.1.7",\n    "type": "usw",\n    "model": "US48P750",\n    "version": "4.3.13.11253"\n  },\n  {\n    "clients": 26,\n    "uptime": 4921914,\n    "name": "gateway",\n    "site_id": "574e86664333ffb999a2683f",\n    "source": "https://unifi-controller:8443",\n    "controller": "572e0211-a02a-4d09-b6a5-bad63fb76f1c",\n    "mac": "74:83:c2:1a:53:93",\n    "ip": "67.181.75.120",\n    "type": "ugw",\n    "model": "UGW4",\n    "version": "4.4.51.5287926"\n  }\n]\n')),Object(a.b)("h2",{id:"apiv1inputinputdevicessiteid"},Object(a.b)("inlineCode",{parentName:"h2"},"/api/v1/input/<input>/devices/<siteID>")),Object(a.b)("p",null,"Prints the most recently collected devices from a specific site."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-shell"},"$ curl -s unifi.poller:37288/api/v1/input/unifi/devices/574e86664333ffb999a2683f | jq .\n# Looks the same as above.\n")))}o.isMDXComponent=!0}}]);